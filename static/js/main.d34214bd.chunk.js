(window.webpackJsonpf2e_week6=window.webpackJsonpf2e_week6||[]).push([[0],{17:function(e,t,a){e.exports={aside:"AsideBar_aside__3jvDv",title:"AsideBar_title__2VwUI",subTitle:"AsideBar_subTitle__3Q6eM",roomList:"AsideBar_roomList__3pXtV",addBtnBox:"AsideBar_addBtnBox__1H7fR"}},18:function(e,t,a){e.exports={box:"TextInput_box__2s2c4",textInput:"TextInput_textInput__2jsjx",submit:"TextInput_submit__26dXE",cuteBtn:"TextInput_cuteBtn__uBvk8",cute:"TextInput_cute__2VIZD",shiny:"TextInput_shiny__4wfsw"}},23:function(e,t,a){e.exports={wrapper:"TabBar_wrapper__3JNfN",active:"TabBar_active__3Fef8",closeBtn:"TabBar_closeBtn__2SQ6R"}},29:function(e,t,a){e.exports={rightPart:"Main_rightPart__1siCB",idType:"Main_idType__G6YId",box:"Main_box__3GPH1"}},3:function(e,t,a){e.exports={wrapper:"Content_wrapper__2FEMt",msgBox:"Content_msgBox__k1R2t",time:"Content_time__sR8mW",msgTag:"Content_msgTag__8HqMl",content:"Content_content__3dljS",isSelf:"Content_isSelf__1ICvO",rightBox:"Content_rightBox__2FrOS",alert:"Content_alert__3LNW_",blue:"Content_blue__34V3E",sky:"Content_sky__3m4_g",orange:"Content_orange__yE4NN"}},37:function(e,t,a){e.exports={App:"App_App__2QRnd"}},40:function(e,t,a){e.exports=a(53)},53:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(21),c=a.n(o),l=a(4),s=a(14),m=a(13),i=a(15);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var u=a(12),p=a(36);function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(a,!0).forEach(function(t){Object(p.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var f={toggle:!0,roomss:[],isConnected:!1,userName:"",msg:[],currentMsg:"",popup:"SET_ID_TYPE",chatRooms:[],currentRoom:"\u5927\u5ef3",tabs:["\u5927\u5ef3"],roomNameInput:"",loading:!0,test:""},_=function(e){var t=e.getHours(),a=e.getMinutes()<10?"0".concat(e.getMinutes()):e.getMinutes();return"".concat(t,":").concat(a)},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE":return d({},e,{toggle:!e.toggle});case"ROOM_FETCH_SUCCEEDED":return d({},e,{rooms:t.rooms});case"FIREBASE_CONNECTED":return d({},e,{isConnected:t.isConnected});case"UPDATE_MSG":var a=d({},t.msg,{dateObj:t.msg.timeStamp.toDate(),dateToShow:_(t.msg.timeStamp.toDate())});return t.isAll?d({},e,{msg:Object(u.a)(a)}):d({},e,{msg:[].concat(Object(u.a)(e.msg),[a])});case"CHANGE_MSG":return d({},e,{currentMsg:t.isAdd?e.currentMsg+t.msg:t.msg});case"SET_ID":return d({},e,{userName:t.id});case"OPEN_POPUP":return d({},e,{popup:t.popup});case"UPDATE_ONLINE_USER":return d({},e,{onlineUser:t.count});case"SET_CHAT_ROOMS":return t.room.name===t.roomParam?d({},e,{chatRooms:[].concat(Object(u.a)(e.chatRooms),[t.room]),currentRoom:t.roomParam,tabs:e.tabs.includes(t.roomParam)?e.tabs:[].concat(Object(u.a)(e.tabs),[t.roomParam])}):d({},e,{chatRooms:[].concat(Object(u.a)(e.chatRooms),[t.room])});case"CHANGE_CURRENT_ROOM":return e.tabs.includes(t.room)?d({},e,{currentRoom:t.room}):d({},e,{currentRoom:t.room,tabs:[].concat(Object(u.a)(e.tabs),[t.room])});case"CLOSE_TAB":var n=e.tabs.indexOf(t.tab);return d({},e,{currentRoom:e.currentRoom===t.tab?e.tabs[n-1]:e.currentRoom,tabs:[].concat(Object(u.a)(e.tabs.slice(0,n)),Object(u.a)(e.tabs.slice(n+1)))});case"RESET_MSGS":return d({},e,{msg:[]});case"SET_ROOM_NAME":return d({},e,{roomNameInput:t.name});case"SET_LOADING":return d({},e,{loading:t.loading});default:return e}},b=a(16),v=a.n(b),h=(a(33),a(34),a(37)),O=a.n(h),N={apiKey:"AIzaSyDZ-WE4xegOzuba568z1DXE9WAuLV0LhsE",authDomain:"mychatroom-b5909.firebaseapp.com",databaseURL:"https://mychatroom-b5909.firebaseio.com",projectId:"mychatroom-b5909",storageBucket:"mychatroom-b5909.appspot.com",messagingSenderId:"620146762888",appId:"1:620146762888:web:a2dcc475ab5d9187"},C=function(e,t){return v.a.firestore().collection("chatRoom").doc(e).collection("messages").onSnapshot(function(e){e.docChanges().forEach(function(e){t(e.doc.data())})})},S=function(e){return v.a.firestore().collection("chatRoom").onSnapshot(function(t){t.docChanges().forEach(function(t){e(t.doc.data())})})},R=function(e){return{type:"FIREBASE_CONNECTED",isConnected:e}},T=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:"UPDATE_MSG",msg:e,isAll:t}},y=function(e){return{type:"SET_LOADING",loading:e}},P=function(){return{type:"RESET_MSGS"}},w=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:"CHANGE_MSG",msg:e,isAdd:t}},j=function(e){return{type:"SET_ID",id:e}},I=function(e){return{type:"OPEN_POPUP",popup:e}},x=function(e,t){return{type:"SET_CHAT_ROOMS",room:e,roomParam:t}},A=function(e){return{type:"CHANGE_CURRENT_ROOM",room:e}},M=a(7),B=a.n(M),k=function(e){var t=e.onClickVister,a=e.onClickUseName;return r.a.createElement("div",{className:B.a.idType},r.a.createElement("div",{className:B.a.someWord},r.a.createElement("h2",null,"\u804a\u5929\u5ba42.0\u7248\u4e0a\u7dda\u5566(*\uff9f\u2200\uff9f*) "),r.a.createElement("br",null),"[new] \u65b0\u589e\u591a\u804a\u5929\u5ba4\u529f\u80fd",r.a.createElement("br",null),"[new] \u65b0\u589e\u591a\u7a2e\u8868\u60c5\u7b26\u865f",r.a.createElement("br",null),"\u6b61\u8fce\u5927\u5bb6\u627e\u89aa\u670b\u597d\u53cb\u4f86\u804a~"),r.a.createElement("div",{className:B.a.btnBox},r.a.createElement("div",{onClick:t},"[\u533f\u540d\u804a\u5929]"),r.a.createElement("div",{onClick:a},"[\u66b1\u7a31\u804a\u5929]")))},D=function(e){var t=e.inputValue,a=e.onClickConfirm,n=e.onChangeId;return r.a.createElement("div",{className:B.a.idSet},r.a.createElement("div",{className:B.a.title},"\u66b1\u7a31\u804a\u5929"),r.a.createElement("input",{value:t,onChange:n,placeholder:"\u8f38\u5165\u66b1\u7a31"}),r.a.createElement("div",{onClick:a,className:B.a.confirm},"[\u78ba\u5b9a]"))},U=function(e){var t=e.inputValue,a=e.onChange,n=e.onClickConfirm;return r.a.createElement("div",{className:B.a.idSet},r.a.createElement("div",{className:B.a.title},"\u5275\u7acb\u804a\u5929\u5ba4"),r.a.createElement("input",{value:t,onChange:a,placeholder:"\u8f38\u5165\u804a\u5929\u5ba4\u540d\u7a31"}),r.a.createElement("div",{onClick:n,className:B.a.confirm},"[\u78ba\u5b9a]"))},G=function(e){var t=e.popup,a=e.userName,n=e.roomNameInput,o=e.setId,c=e.openIdSetPop,l=e.onChangeId,s=e.onChangeRoomName,m=e.creatNewRoom,i=e.closePopup;return r.a.createElement("div",{className:"".concat(B.a.cover," ").concat(t?"":B.a.hide),onClick:i},r.a.createElement("div",{className:B.a.contentBox},function(e){switch(e){case"SET_ID_TYPE":return r.a.createElement(k,{onClickVister:o,onClickUseName:c});case"SET_ID":return r.a.createElement(D,{onClickConfirm:o,onChangeId:l,inputValue:a});case"CREAT_ROOM":return r.a.createElement(U,{inputValue:n,onChange:s,onClickConfirm:m});default:return null}}(t)))},L=function(){var e=Object(l.b)(),t=Object(l.c)(function(e){return e});return r.a.createElement(G,{popup:t.popup,userName:t.userName,roomNameInput:t.roomNameInput,setId:function(){var a=Math.floor(1e3*Math.random());e(j(t.userName||"\u8a2a\u5ba2".concat(a,"\u865f"))),e(I(""))},openIdSetPop:function(){e(I("SET_ID"))},onChangeId:function(t){e(j(t.target.value.trim()))},onChangeRoomName:function(t){e({type:"SET_ROOM_NAME",name:t.target.value.trim()})},creatNewRoom:function(){var a,n;t.roomNameInput&&(a=t.roomNameInput,n=function(){e(A(t.roomNameInput)),e(I(""))},v.a.firestore().collection("chatRoom").doc(a).set({name:a}).then(function(e){n()}).catch(function(e){console.error("Error adding document: ",e)}))},closePopup:function(a){a.target===a.currentTarget&&"CREAT_ROOM"===t.popup&&e(I(""))}})},V=a(17),H=a.n(V);function W(){return(W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function q(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var F=r.a.createElement("defs",null,r.a.createElement("style",null,".a{fill:#d4d4d4;}")),X=r.a.createElement("g",{transform:"translate(0 -18.271)"},r.a.createElement("g",{transform:"translate(0 18.271)"},r.a.createElement("path",{className:"a",d:"M38.385,21.952a1.841,1.841,0,1,0-1.3-.539A1.773,1.773,0,0,0,38.385,21.952Z",transform:"translate(-35.625 -18.271)"}),r.a.createElement("path",{className:"a",d:"M165.258,96.076a2.76,2.76,0,1,0-.809-1.952A2.66,2.66,0,0,0,165.258,96.076Z",transform:"translate(-160.308 -89.523)"}),r.a.createElement("path",{className:"a",d:"M367.293,21.952a1.841,1.841,0,1,0-1.3-.539A1.773,1.773,0,0,0,367.293,21.952Z",transform:"translate(-356.25 -18.271)"}),r.a.createElement("path",{className:"a",d:"M382.232,164.456a1.376,1.376,0,0,0-.313.151,4.719,4.719,0,0,1-.7.306,2.525,2.525,0,0,1-.855.155,2.886,2.886,0,0,1-.956-.165,3.613,3.613,0,0,1,.036.474,3.164,3.164,0,0,1-.583,1.84,2.479,2.479,0,0,1,1.905.92h.963a1.648,1.648,0,0,0,.992-.291.985.985,0,0,0,.4-.852Q383.123,164.456,382.232,164.456Z",transform:"translate(-369.32 -160.775)"}),r.a.createElement("path",{className:"a",d:"M83.087,294.951a6.087,6.087,0,0,0-.191-.78,3.7,3.7,0,0,0-.309-.7,2.534,2.534,0,0,0-.446-.582,1.878,1.878,0,0,0-.615-.385,2.159,2.159,0,0,0-.8-.144.847.847,0,0,0-.309.155q-.237.154-.525.345a3.338,3.338,0,0,1-3.48,0q-.288-.19-.525-.345a.847.847,0,0,0-.309-.155,2.16,2.16,0,0,0-.8.144,1.875,1.875,0,0,0-.615.385,2.528,2.528,0,0,0-.446.582,3.7,3.7,0,0,0-.309.7,6.106,6.106,0,0,0-.191.78,7.309,7.309,0,0,0-.1.784q-.025.363-.025.744a1.791,1.791,0,0,0,.525,1.362,1.94,1.94,0,0,0,1.395.5h6.283a1.94,1.94,0,0,0,1.395-.5,1.791,1.791,0,0,0,.525-1.362q0-.381-.025-.744A7.435,7.435,0,0,0,83.087,294.951Z",transform:"translate(-71.25 -285.457)"}),r.a.createElement("path",{className:"a",d:"M4.263,167.216a3.165,3.165,0,0,1-.582-1.84,3.59,3.59,0,0,1,.036-.474,2.889,2.889,0,0,1-.956.165,2.524,2.524,0,0,1-.855-.155,4.725,4.725,0,0,1-.7-.306,1.372,1.372,0,0,0-.313-.151q-.891,0-.891,2.538a.985.985,0,0,0,.4.852,1.648,1.648,0,0,0,.992.291h.963A2.479,2.479,0,0,1,4.263,167.216Z",transform:"translate(0 -160.774)"}))),Z=function(e){var t=e.svgRef,a=e.title,n=q(e,["svgRef","title"]);return r.a.createElement("svg",W({width:13.803,height:12.883,viewBox:"0 0 13.803 12.883",ref:t},n),r.a.createElement("title",null,a),F,X)},z=r.a.forwardRef(function(e,t){return r.a.createElement(Z,W({svgRef:t},e))}),Q=(a.p,function(e){var t=e.creatRoom,a=e.chatRooms;return r.a.createElement("aside",{className:H.a.aside},r.a.createElement("div",{className:H.a.title},r.a.createElement("h2",null,r.a.createElement(z,null),r.a.createElement("span",null,"\u804a\u5929\u5ba4\u7e3d\u7ba1"))),r.a.createElement("div",{className:H.a.subTitle},"\u804a\u5929\u5ba4\u5217\u8868 (",a.length,")"),r.a.createElement("div",{className:H.a.roomList},r.a.createElement("ul",null,a.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement(m.b,{to:"/".concat(e.name)},"C00",t+1," ",e.name))}))),r.a.createElement("div",{className:H.a.addBtnBox},r.a.createElement("button",{onClick:t},"\u65b0\u589e\u804a\u5929\u5ba4")))}),J=function(){var e=Object(l.b)(),t=Object(l.c)(function(e){return e});return r.a.createElement(Q,{creatRoom:function(){e(I("CREAT_ROOM"))},chatRooms:t.chatRooms})},Y=a(29),K=a.n(Y),$=a(3),ee=a.n($);function te(e,t){return(e=new Date(e.dateObj).getTime())-(t=new Date(t.dateObj).getTime())}var ae=function(e){var t=e.name,a=e.msg,n=e.isSelf,o=e.time;return r.a.createElement("div",{className:"".concat(ee.a.msgBox," ").concat(n?ee.a.isSelf:"")},r.a.createElement("div",{className:ee.a.time},r.a.createElement("div",null,o)),r.a.createElement("div",{className:ee.a.rightBox},r.a.createElement("div",{className:ee.a.msgTag},"<".concat(n?"!--":"").concat(t,">")),r.a.createElement("div",{className:ee.a.content},a),r.a.createElement("div",{className:ee.a.msgTag},"".concat(n?"--":"</".concat(t),">"))))},ne=function(e){var t=e.text;return r.a.createElement("div",{className:ee.a.alert},r.a.createElement("span",{className:ee.a.blue},"<link"),r.a.createElement("span",{className:ee.a.sky}," rel="),r.a.createElement("span",{className:ee.a.orange},'"random"'),r.a.createElement("span",{className:ee.a.sky}," href="),r.a.createElement("span",{className:ee.a.orange},'"'.concat(t,'">')))},re=r.a.memo(function(e){var t=e.msgs,a=e.userName,n=e.loading;t=t.sort(te);var o=null;return o=n?r.a.createElement(ne,{text:"\u6b63\u5728\u8b80\u53d6\u8a0a\u606f\u4e2d... \u6216\u8a31\u662f\u76ee\u524d\u804a\u5929\u5ba4\u5167\u7121\u4efb\u4f55\u8a0a\u606f, \u4f86\u6436\u982d\u9999\u5427!"}):t.map(function(e,t){return r.a.createElement(ae,{name:e.name,msg:e.msg,time:e.dateToShow,key:t,isSelf:e.name===a})}),r.a.createElement("div",{className:ee.a.wrapper,id:"content"},r.a.createElement("div",{className:ee.a.scrollArea},o))}),oe=a(39),ce=a(18),le=a.n(ce),se=["\u03c3`\u2200\xb4)\u03c3","_(:3 \u300d\u2220 )_","(\u0301\u25c9\u25de\u0c6a\u25df\u25c9\u2035)","\u0c25\u0c6a\u0c25","(\u03c3\u2032\u25bd\u2035)\u2032\u25bd\u2035)\u03c3","\uff61\uff9f\u30fd(*\xb4\u2200`)\uff89\uff9f\uff61","(\u25d4\u0c6a\u25d4)","(*\xb4\u2200`)~\u2665","(*\uff9f\u2200\uff9f*)","\u03c3`\u2200\xb4)\u03c3","(`\u30fb\u03c9\u30fb\xb4)","\u3002\uff65\uff9f\uff65(\u3064\u0434`\uff9f)\uff65\uff9f\uff65"],me=function(e){var t=e.onClick;return r.a.createElement("div",{className:le.a.cute},se.map(function(e,a){return r.a.createElement("div",{key:a,onClick:function(){t(e)}},e)}))},ie=function(e){var t=e.onSubmit,a=e.onChangeMsg,o=e.onAddCute,c=e.value,l=e.user,s=Object(n.useRef)(null),m=Object(n.useState)(!1),i=Object(oe.a)(m,2),u=i[0],p=i[1];return r.a.createElement("div",{className:le.a.box},r.a.createElement("form",{onSubmit:t},r.a.createElement("label",null,r.a.createElement("span",null,l||"\u4f7f\u7528\u8005"," >"),r.a.createElement("input",{name:"msg",type:"text",ref:s,value:c,onChange:a,className:le.a.textInput,placeholder:"\u8aaa\u9ede\u751a\u9ebc\u5427..."})),r.a.createElement("div",{className:le.a.cuteBtn},r.a.createElement("span",{onClick:function(e){p(!u)}},"(\uff9f\u2200\uff9f) "),"<","-\u7528\u8868\u60c5\u7b26\u865f\u4f86\u8868\u9054\u4f60\u7684\u60c5\u611f\u5427~"),r.a.createElement("input",{type:"submit",value:"\u9001\u51fa",className:le.a.submit}),u&&r.a.createElement(me,{onClick:function(e){p(!1),s.current.focus(),o(e)}})))},ue=a(23),pe=a.n(ue),Ee=function(e){var t=e.tabs,a=e.active,n=e.onClose;return r.a.createElement("div",{className:pe.a.wrapper},r.a.createElement("ul",null,t.map(function(e,t){return r.a.createElement("li",{key:t,className:"".concat(e===a?pe.a.active:"")},r.a.createElement(m.b,{to:"/".concat(e)},e),0!==t&&r.a.createElement("div",{className:pe.a.closeBtn,onClick:function(t){t.stopPropagation(),n(e)}},"X"))})))},de=function(){var e=Object(l.b)(),t=Object(l.c)(function(e){return e});console.log(Date(Date.now())),Object(n.useEffect)(function(){var e=document.querySelector("#content");e.scrollTop=e.scrollHeight},[t.msg.length]);return r.a.createElement("div",{className:K.a.rightPart},r.a.createElement(Ee,{tabs:t.tabs,active:t.currentRoom,onClose:function(t){e(function(e){return{type:"CLOSE_TAB",tab:e}}(t))}}),r.a.createElement(re,{msgs:t.msg,userName:t.userName,loading:t.loading}),r.a.createElement("div",{className:K.a.box}),r.a.createElement(ie,{user:t.userName,onSubmit:function(a){if(a&&a.preventDefault(),0!==t.currentMsg.trim().length){var n,r,o,c={name:t.userName,msg:t.currentMsg,timeStamp:new Date};e(w("")),n=t.currentRoom,r=c,o=function(){},v.a.firestore().collection("chatRoom").doc(n).collection("messages").add(r).then(function(e){o()}).catch(function(e){console.error("Error adding document: ",e)})}},onChangeMsg:function(t){e(w(t.target.value))},value:t.currentMsg,onAddCute:function(t){e(w(t,!0))}}))};var fe=function(){var e=Object(l.b)(),t=Object(l.c)(function(e){return e}),a=Object(n.useRef)(),o=Object(i.f)().roomParam;return Object(n.useEffect)(function(){try{v.a.initializeApp(N),e(R(!0))}catch(t){console.log(t)}},[]),Object(n.useEffect)(function(){t.isConnected&&S(function(t){e(x(t,o))})},[t.isConnected]),Object(n.useEffect)(function(){var n;n=t.chatRooms.map(function(e){return e.name}).includes(o)?o:"\u5927\u5ef3",e(A(n)),a.current&&(a.current(),e(P())),e(y(!0)),a.current=C(n,function(t){e(y(!1)),e(T(t,!1))})},[t.currentRoom,o]),r.a.createElement("div",{className:O.a.App},r.a.createElement(J,null),r.a.createElement(de,null),r.a.createElement(L,null))},_e=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.b,ge=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.b;Object(s.c)(g,ge());c.a.render(r.a.createElement(function(e){var t=Object(s.c)(g,_e());return r.a.createElement(l.a,{store:t},e.children)},null,r.a.createElement(m.a,null,r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/",exact:!0,children:r.a.createElement(fe,null)}),r.a.createElement(i.a,{path:"/:roomParam",children:r.a.createElement(fe,null)})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},7:function(e,t,a){e.exports={cover:"PopContent_cover__14zWP",hide:"PopContent_hide__DIW1U",contentBox:"PopContent_contentBox__2I7zF",idType:"PopContent_idType__3FPkg",someWord:"PopContent_someWord__2paBq",btnBox:"PopContent_btnBox__3ffgh",idSet:"PopContent_idSet__3qA68",title:"PopContent_title__1xqSm",confirm:"PopContent_confirm__3V3Bp"}}},[[40,1,2]]]);
//# sourceMappingURL=main.d34214bd.chunk.js.map