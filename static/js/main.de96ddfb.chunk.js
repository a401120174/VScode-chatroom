(window.webpackJsonpf2e_week6=window.webpackJsonpf2e_week6||[]).push([[0],{16:function(e,t,a){e.exports={box:"TextInput_box__ZdDqx",textInput:"TextInput_textInput__30LPe",submit:"TextInput_submit__2UTqV",animation:"TextInput_animation__1xKud",shiny:"TextInput_shiny__5lEO-",cuteBtn:"TextInput_cuteBtn__34lOo",cute:"TextInput_cute__2aTek"}},17:function(e,t,a){e.exports={aside:"AsideBar_aside__2_xdu",title:"AsideBar_title__3Bqqb",subTitle:"AsideBar_subTitle__2fV7Y",roomList:"AsideBar_roomList__v2A5R",addBtnBox:"AsideBar_addBtnBox__2XsaR"}},23:function(e,t,a){e.exports={wrapper:"TabBar_wrapper__3LCso",active:"TabBar_active__2sP2_",closeBtn:"TabBar_closeBtn__rQQpz"}},3:function(e,t,a){e.exports={wrapper:"Content_wrapper__78V2p",msgBox:"Content_msgBox__1maU8",time:"Content_time__8cSyA",msgTag:"Content_msgTag__cpXxb",content:"Content_content__1uhUL",isSelf:"Content_isSelf__TsQUt",rightBox:"Content_rightBox__20oiM",alert:"Content_alert__3G9C3",blue:"Content_blue__TDwD9",sky:"Content_sky__2yULu",orange:"Content_orange__2TDds"}},37:function(e,t,a){e.exports={App:"App_App__37HFC"}},39:function(e,t,a){e.exports={rightPart:"Main_rightPart__PSryN",idType:"Main_idType__5kO5B"}},40:function(e,t,a){e.exports={box:"UserOnlineBar_box__2hj_D"}},41:function(e,t,a){e.exports=a(54)},54:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(21),c=a.n(o),s=a(5),l=a(20),m=a(14),i=a(13);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var u=a(12),p=a(36);function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(a,!0).forEach(function(t){Object(p.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var f={toggle:!0,roomss:[],isConnected:!1,userName:"",msg:[],currentMsg:"",popup:"SET_ID_TYPE",chatRooms:[],currentRoom:"\u5927\u5ef3",tabs:["\u5927\u5ef3"],roomNameInput:"",loading:!0,test:""},E=function(e){var t=e.getHours(),a=e.getMinutes()<10?"0".concat(e.getMinutes()):e.getMinutes();return"".concat(t,":").concat(a)},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE":return d({},e,{toggle:!e.toggle});case"ROOM_FETCH_SUCCEEDED":return d({},e,{rooms:t.rooms});case"FIREBASE_CONNECTED":return d({},e,{isConnected:t.isConnected});case"UPDATE_MSG":var a=d({},t.msg,{dateObj:t.msg.timeStamp.toDate(),dateToShow:E(t.msg.timeStamp.toDate())});return t.isAll?d({},e,{msg:Object(u.a)(a)}):d({},e,{msg:[].concat(Object(u.a)(e.msg),[a])});case"CHANGE_MSG":return d({},e,{currentMsg:t.isAdd?e.currentMsg+t.msg:t.msg});case"SET_ID":return d({},e,{userName:t.id});case"OPEN_POPUP":return d({},e,{popup:t.popup});case"UPDATE_ONLINE_USER":return d({},e,{onlineUser:t.count});case"SET_CHAT_ROOMS":return t.room.name===t.roomParam?d({},e,{chatRooms:[].concat(Object(u.a)(e.chatRooms),[t.room]),currentRoom:t.roomParam,tabs:e.tabs.includes(t.roomParam)?e.tabs:[].concat(Object(u.a)(e.tabs),[t.roomParam])}):d({},e,{chatRooms:[].concat(Object(u.a)(e.chatRooms),[t.room])});case"CHANGE_CURRENT_ROOM":return e.tabs.includes(t.room)?d({},e,{currentRoom:t.room}):d({},e,{currentRoom:t.room,tabs:[].concat(Object(u.a)(e.tabs),[t.room])});case"CLOSE_TAB":var n=e.tabs.indexOf(t.tab);return d({},e,{currentRoom:e.currentRoom===t.tab?e.tabs[n-1]:e.currentRoom,tabs:[].concat(Object(u.a)(e.tabs.slice(0,n)),Object(u.a)(e.tabs.slice(n+1)))});case"RESET_MSGS":return d({},e,{msg:[]});case"SET_ROOM_NAME":return d({},e,{roomNameInput:t.name});case"SET_LOADING":return d({},e,{loading:t.loading});default:return e}},b=a(15),v=a.n(b),h=(a(33),a(34),a(37)),O=a.n(h),N={apiKey:"AIzaSyDZ-WE4xegOzuba568z1DXE9WAuLV0LhsE",authDomain:"mychatroom-b5909.firebaseapp.com",databaseURL:"https://mychatroom-b5909.firebaseio.com",projectId:"mychatroom-b5909",storageBucket:"mychatroom-b5909.appspot.com",messagingSenderId:"620146762888",appId:"1:620146762888:web:a2dcc475ab5d9187"},C=function(e,t){return v.a.firestore().collection("chatRoom").doc(e).collection("messages").onSnapshot(function(e){e.docChanges().forEach(function(e){t(e.doc.data())})})},T=function(e){return v.a.firestore().collection("chatRoom").onSnapshot(function(t){t.docChanges().forEach(function(t){e(t.doc.data())})})},S=function(e){return{type:"FIREBASE_CONNECTED",isConnected:e}},y=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:"UPDATE_MSG",msg:e,isAll:t}},R=function(e){return{type:"SET_LOADING",loading:e}},x=function(){return{type:"RESET_MSGS"}},P=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:"CHANGE_MSG",msg:e,isAdd:t}},j=function(e){return{type:"SET_ID",id:e}},w=function(e){return{type:"OPEN_POPUP",popup:e}},A=function(e,t){return{type:"SET_CHAT_ROOMS",room:e,roomParam:t}},B=function(e){return{type:"CHANGE_CURRENT_ROOM",room:e}},M=a(7),I=a.n(M),D=function(e){var t=e.popup,a=e.userName,n=e.roomNameInput,o=e.setId,c=e.openIdSetPop,s=e.onChangeId,l=e.onChangeRoomName,m=e.creatNewRoom,i=e.closePopup;return r.a.createElement("div",{className:"".concat(I.a.cover," ").concat(t?"":I.a.hide),onClick:i},r.a.createElement("div",{className:I.a.contentBox},function(e){switch(e){case"SET_ID_TYPE":return r.a.createElement("div",{className:I.a.idType},r.a.createElement("div",{className:I.a.someWord},r.a.createElement("h2",null,"\u804a\u5929\u5ba42.0\u7248\u4e0a\u7dda\u5566(*\uff9f\u2200\uff9f*) "),r.a.createElement("br",null),"[new] \u65b0\u589e\u591a\u804a\u5929\u5ba4\u529f\u80fd",r.a.createElement("br",null),"[new] \u65b0\u589e\u591a\u7a2e\u8868\u60c5\u7b26\u865f",r.a.createElement("br",null),"\u6b61\u8fce\u5927\u5bb6\u627e\u89aa\u670b\u597d\u53cb\u4f86\u804a~"),r.a.createElement("div",{className:I.a.btnBox},r.a.createElement("div",{onClick:o},"[\u533f\u540d\u804a\u5929]"),r.a.createElement("div",{onClick:c},"[\u66b1\u7a31\u804a\u5929]")));case"SET_ID":return r.a.createElement("div",{className:I.a.idSet},r.a.createElement("div",{className:I.a.title},"\u66b1\u7a31\u804a\u5929"),r.a.createElement("input",{value:a,onChange:s,placeholder:"\u8f38\u5165\u66b1\u7a31"}),r.a.createElement("div",{onClick:o,className:I.a.confirm},"[\u78ba\u5b9a]"));case"CREAT_ROOM":return r.a.createElement("div",{className:I.a.idSet},r.a.createElement("div",{className:I.a.title},"\u5275\u7acb\u804a\u5929\u5ba4"),r.a.createElement("input",{value:n,onChange:l,placeholder:"\u8f38\u5165\u804a\u5929\u5ba4\u540d\u7a31"}),r.a.createElement("div",{onClick:m,className:I.a.confirm},"[\u78ba\u5b9a]"));default:return null}}(t)))},k=function(){var e=Object(s.b)(),t=Object(s.c)(function(e){return e});return r.a.createElement(D,{popup:t.popup,userName:t.userName,roomNameInput:t.roomNameInput,setId:function(){var a=Math.floor(1e3*Math.random());e(j(t.userName||"\u8a2a\u5ba2".concat(a,"\u865f"))),e(w(""))},openIdSetPop:function(){e(w("SET_ID"))},onChangeId:function(t){e(j(t.target.value.trim()))},onChangeRoomName:function(t){e({type:"SET_ROOM_NAME",name:t.target.value.trim()})},creatNewRoom:function(){var a,n;t.roomNameInput&&(a=t.roomNameInput,n=function(){e(B(t.roomNameInput)),e(w(""))},v.a.firestore().collection("chatRoom").doc(a).set({name:a}).then(function(e){n()}).catch(function(e){console.error("Error adding document: ",e)}))},closePopup:function(a){a.target===a.currentTarget&&"CREAT_ROOM"===t.popup&&e(w(""))}})},L=a(17),U=a.n(L);function G(){return(G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function q(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var H=r.a.createElement("defs",null,r.a.createElement("style",null,".a{fill:#d4d4d4;}")),X=r.a.createElement("g",{transform:"translate(0 -18.271)"},r.a.createElement("g",{transform:"translate(0 18.271)"},r.a.createElement("path",{className:"a",d:"M38.385,21.952a1.841,1.841,0,1,0-1.3-.539A1.773,1.773,0,0,0,38.385,21.952Z",transform:"translate(-35.625 -18.271)"}),r.a.createElement("path",{className:"a",d:"M165.258,96.076a2.76,2.76,0,1,0-.809-1.952A2.66,2.66,0,0,0,165.258,96.076Z",transform:"translate(-160.308 -89.523)"}),r.a.createElement("path",{className:"a",d:"M367.293,21.952a1.841,1.841,0,1,0-1.3-.539A1.773,1.773,0,0,0,367.293,21.952Z",transform:"translate(-356.25 -18.271)"}),r.a.createElement("path",{className:"a",d:"M382.232,164.456a1.376,1.376,0,0,0-.313.151,4.719,4.719,0,0,1-.7.306,2.525,2.525,0,0,1-.855.155,2.886,2.886,0,0,1-.956-.165,3.613,3.613,0,0,1,.036.474,3.164,3.164,0,0,1-.583,1.84,2.479,2.479,0,0,1,1.905.92h.963a1.648,1.648,0,0,0,.992-.291.985.985,0,0,0,.4-.852Q383.123,164.456,382.232,164.456Z",transform:"translate(-369.32 -160.775)"}),r.a.createElement("path",{className:"a",d:"M83.087,294.951a6.087,6.087,0,0,0-.191-.78,3.7,3.7,0,0,0-.309-.7,2.534,2.534,0,0,0-.446-.582,1.878,1.878,0,0,0-.615-.385,2.159,2.159,0,0,0-.8-.144.847.847,0,0,0-.309.155q-.237.154-.525.345a3.338,3.338,0,0,1-3.48,0q-.288-.19-.525-.345a.847.847,0,0,0-.309-.155,2.16,2.16,0,0,0-.8.144,1.875,1.875,0,0,0-.615.385,2.528,2.528,0,0,0-.446.582,3.7,3.7,0,0,0-.309.7,6.106,6.106,0,0,0-.191.78,7.309,7.309,0,0,0-.1.784q-.025.363-.025.744a1.791,1.791,0,0,0,.525,1.362,1.94,1.94,0,0,0,1.395.5h6.283a1.94,1.94,0,0,0,1.395-.5,1.791,1.791,0,0,0,.525-1.362q0-.381-.025-.744A7.435,7.435,0,0,0,83.087,294.951Z",transform:"translate(-71.25 -285.457)"}),r.a.createElement("path",{className:"a",d:"M4.263,167.216a3.165,3.165,0,0,1-.582-1.84,3.59,3.59,0,0,1,.036-.474,2.889,2.889,0,0,1-.956.165,2.524,2.524,0,0,1-.855-.155,4.725,4.725,0,0,1-.7-.306,1.372,1.372,0,0,0-.313-.151q-.891,0-.891,2.538a.985.985,0,0,0,.4.852,1.648,1.648,0,0,0,.992.291h.963A2.479,2.479,0,0,1,4.263,167.216Z",transform:"translate(0 -160.774)"}))),Z=function(e){var t=e.svgRef,a=e.title,n=q(e,["svgRef","title"]);return r.a.createElement("svg",G({width:13.803,height:12.883,viewBox:"0 0 13.803 12.883",ref:t},n),r.a.createElement("title",null,a),H,X)},W=r.a.forwardRef(function(e,t){return r.a.createElement(Z,G({svgRef:t},e))}),z=(a.p,function(e){var t=e.creatRoom,a=e.chatRooms;return r.a.createElement("aside",{className:U.a.aside},r.a.createElement("div",{className:U.a.title},r.a.createElement("h2",null,r.a.createElement(W,null),r.a.createElement("span",null,"\u804a\u5929\u5ba4\u7e3d\u7ba1"))),r.a.createElement("div",{className:U.a.subTitle},"\u804a\u5929\u5ba4\u5217\u8868 (",a.length,")"),r.a.createElement("div",{className:U.a.roomList},r.a.createElement("ul",null,a.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement(m.b,{to:"/".concat(e.name)},"C00",t+1," ",e.name))}))),r.a.createElement("div",{className:U.a.addBtnBox},r.a.createElement("button",{onClick:t},"\u65b0\u589e\u804a\u5929\u5ba4")))}),F=function(){var e=Object(s.b)(),t=Object(s.c)(function(e){return e});return r.a.createElement(z,{creatRoom:function(){e(w("CREAT_ROOM"))},chatRooms:t.chatRooms})},V=a(39),Q=a.n(V),K=a(3),Y=a.n(K);function J(e,t){return(e=new Date(e.dateObj).getTime())-(t=new Date(t.dateObj).getTime())}var $=function(e){var t=e.name,a=e.msg,n=e.isSelf,o=e.time;return r.a.createElement("div",{className:"".concat(Y.a.msgBox," ").concat(n?Y.a.isSelf:"")},r.a.createElement("div",{className:Y.a.time},r.a.createElement("div",null,o)),r.a.createElement("div",{className:Y.a.rightBox},r.a.createElement("div",{className:Y.a.msgTag},"<".concat(n?"!--":"").concat(t,">")),r.a.createElement("div",{className:Y.a.content},a),r.a.createElement("div",{className:Y.a.msgTag},"".concat(n?"--":"</".concat(t),">"))))},ee=function(e){var t=e.text;return r.a.createElement("div",{className:Y.a.alert},r.a.createElement("span",{className:Y.a.blue},"<link"),r.a.createElement("span",{className:Y.a.sky}," rel="),r.a.createElement("span",{className:Y.a.orange},'"random"'),r.a.createElement("span",{className:Y.a.sky}," href="),r.a.createElement("span",{className:Y.a.orange},'"'.concat(t,'">')))},te=r.a.memo(function(e){var t=e.msgs,a=e.userName,n=e.loading;t=t.sort(J);var o=null;return o=n?r.a.createElement(ee,{text:"\u6b63\u5728\u8b80\u53d6\u8a0a\u606f\u4e2d... \u6216\u8a31\u662f\u76ee\u524d\u804a\u5929\u5ba4\u5167\u7121\u4efb\u4f55\u8a0a\u606f, \u4f86\u6436\u982d\u9999\u5427!"}):t.map(function(e,t){return r.a.createElement($,{name:e.name,msg:e.msg,time:e.dateToShow,key:t,isSelf:e.name===a})}),r.a.createElement("div",{className:Y.a.wrapper,id:"content"},r.a.createElement("div",{className:Y.a.scrollArea},o))}),ae=a(29),ne=a(16),re=a.n(ne),oe=["\u03c3`\u2200\xb4)\u03c3","_(:3 \u300d\u2220 )_","(\u0301\u25c9\u25de\u0c6a\u25df\u25c9\u2035)","\u0c25\u0c6a\u0c25","(\u03c3\u2032\u25bd\u2035)\u2032\u25bd\u2035)\u03c3","\uff61\uff9f\u30fd(*\xb4\u2200`)\uff89\uff9f\uff61","(\u25d4\u0c6a\u25d4)","(*\xb4\u2200`)~\u2665","(*\uff9f\u2200\uff9f*)","\u03c3`\u2200\xb4)\u03c3","(`\u30fb\u03c9\u30fb\xb4)","\u3002\uff65\uff9f\uff65(\u3064\u0434`\uff9f)\uff65\uff9f\uff65"],ce=function(e){var t=e.onClick;return r.a.createElement("div",{className:re.a.cute},oe.map(function(e,a){return r.a.createElement("div",{key:a,onClick:function(){t(e)}},e)}))},se=function(e){var t=e.onSubmit,a=e.onChangeMsg,o=e.onAddCute,c=e.value,s=e.user,l=Object(n.useRef)(null),m=Object(n.useRef)(null),i=Object(n.useState)(!1),u=Object(ae.a)(i,2),p=u[0],_=u[1],d=Object(n.useState)(!1),f=Object(ae.a)(d,2),E=f[0],g=f[1];Object(n.useEffect)(function(){l.current.focus()},[]);return r.a.createElement("div",{className:re.a.box},r.a.createElement("form",{onSubmit:t},r.a.createElement("label",null,r.a.createElement("span",{className:"".concat(p||c?"":re.a.animation)},s||"\u4f7f\u7528\u8005"," >"),r.a.createElement("input",{ref:l,value:c,onChange:a,className:re.a.textInput,onFocus:function(e){_(!0)},onBlur:function(e){_(!1)}})),r.a.createElement("div",{className:re.a.cuteBtn,onClick:function(e){g(!E)}},r.a.createElement("span",null,"(\uff9f\u2200\uff9f) "),"<","-\u7528\u8868\u60c5\u7b26\u865f\u4f86\u8868\u9054\u4f60\u7684\u60c5\u611f\u5427~"),r.a.createElement("input",{ref:m,type:"submit",value:"\u9001\u51fa",className:re.a.submit}),E&&r.a.createElement(ce,{onClick:function(e){g(!1),l.current.focus(),o(e)}})))},le=a(23),me=a.n(le),ie=function(e){var t=e.tabs,a=e.active,n=e.onClose;return r.a.createElement("div",{className:me.a.wrapper},r.a.createElement("ul",null,t.map(function(e,t){return r.a.createElement("li",{key:t,className:"".concat(e===a?me.a.active:"")},r.a.createElement(m.b,{to:"/".concat(e)},e),0!==t&&r.a.createElement("div",{className:me.a.closeBtn,onClick:function(t){t.stopPropagation(),n(e)}},"X"))})))},ue=a(40),pe=a.n(ue),_e=function(){return r.a.createElement("div",{className:pe.a.box})},de=function(){var e=Object(s.b)(),t=Object(s.c)(function(e){return e});Object(n.useEffect)(function(){var e=document.querySelector("#content");e.scrollTop=e.scrollHeight},[t.msg.length]);return r.a.createElement("div",{className:Q.a.rightPart},r.a.createElement(ie,{tabs:t.tabs,active:t.currentRoom,onClose:function(t){e(function(e){return{type:"CLOSE_TAB",tab:e}}(t))}}),r.a.createElement(te,{msgs:t.msg,userName:t.userName,loading:t.loading}),r.a.createElement(_e,null),r.a.createElement(se,{user:t.userName,onSubmit:function(a){if(a&&a.preventDefault(),0!==t.currentMsg.trim().length){var n,r,o,c={name:t.userName,msg:t.currentMsg,timeStamp:new Date};n=t.currentRoom,r=c,o=function(){e(P(""))},v.a.firestore().collection("chatRoom").doc(n).collection("messages").add(r).then(function(e){o()}).catch(function(e){console.error("Error adding document: ",e)})}},onChangeMsg:function(t){e(P(t.target.value))},value:t.currentMsg,onAddCute:function(t){e(P(t,!0))}}))};var fe=function(){var e=Object(s.b)(),t=Object(s.c)(function(e){return e}),a=Object(n.useRef)(),o=Object(i.f)().roomParam;return Object(n.useEffect)(function(){try{v.a.initializeApp(N),e(S(!0))}catch(t){console.log(t)}},[]),Object(n.useEffect)(function(){t.isConnected&&T(function(t){e(A(t,o))})},[t.isConnected]),Object(n.useEffect)(function(){var n;n=t.chatRooms.map(function(e){return e.name}).includes(o)?o:"\u5927\u5ef3",e(B(n)),a.current&&(a.current(),e(x())),e(R(!0)),a.current=C(n,function(t){e(R(!1)),e(y(t,!1))})},[t.currentRoom,o]),r.a.createElement("div",{className:O.a.App},r.a.createElement(F,null),r.a.createElement(de,null),r.a.createElement(k,null))},Ee=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.b,ge=Object(l.c)(g,Ee());c.a.render(r.a.createElement(s.a,{store:ge},r.a.createElement(m.a,{his:!0},r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/",exact:!0,children:r.a.createElement(fe,null)}),r.a.createElement(i.a,{path:"/:roomParam",children:r.a.createElement(fe,null)})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},7:function(e,t,a){e.exports={cover:"PopContent_cover__3rleX",hide:"PopContent_hide__3xpg0",contentBox:"PopContent_contentBox__1L1rL",idType:"PopContent_idType__1qAzV",someWord:"PopContent_someWord__30la2",btnBox:"PopContent_btnBox__3MRtC",idSet:"PopContent_idSet__3_UMF",title:"PopContent_title__Xh6TH",confirm:"PopContent_confirm__3KvDX"}}},[[41,1,2]]]);
//# sourceMappingURL=main.de96ddfb.chunk.js.map